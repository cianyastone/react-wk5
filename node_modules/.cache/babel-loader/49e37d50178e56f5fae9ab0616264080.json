{"ast":null,"code":"import _toConsumableArray from\"/Users/linjiutao/Documents/\\u5927\\u5B78\\u68EE\\u6D3B/\\u4E8C\\u4E0B/\\u524D\\u7AEF\\u5DE5\\u7A0B/wk5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import{Button,Select}from\"antd\";import{useContext}from\"react\";import{StoreContext}from\"../store\";import{CartIcon}from\"./Icons\";import{CART_ADD_ITEM,CART_REMOVE_ITEM}from\"../utils/constants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Option=Select.Option;export default function CartModal(_ref){var isModalVisible=_ref.isModalVisible,toggleModal=_ref.toggleModal;var _useContext=useContext(StoreContext),cartItems=_useContext.state.cartItems,dispatch=_useContext.dispatch;var handleCancel=function handleCancel(){return toggleModal(!isModalVisible);};var addToCart=function addToCart(product,qty){dispatch({type:CART_ADD_ITEM,payload:{id:product.id,name:product.name,image:product.image,price:product.price,countInStock:product.countInStock,qty:qty}});};var removeFromCart=function removeFromCart(productId){dispatch({type:CART_REMOVE_ITEM,payload:productId});};var getTotalPrice=function getTotalPrice(){return cartItems.length>0?cartItems.reduce(function(sum,item){return sum+item.price*item.qty;},0):0;};return/*#__PURE__*/_jsxs(_Fragment,{children:[cartItems.length===0?/*#__PURE__*/_jsx(\"div\",{children:\"Cart is empty\"}):cartItems.map(function(item){return/*#__PURE__*/_jsxs(\"li\",{className:\"cart-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-image\",children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-item-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-name\",children:item.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-qty\",children:[\"Qty: \",\"   \",/*#__PURE__*/_jsx(Select,{defaultValue:item.qty,className:\"select-style\",onChange:function onChange(val){return addToCart(item,val);},children:_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(Option,{value:x+1,children:x+1},x+1);})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-item-end\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-price\",children:[\"$\",item.price*item.qty]}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-item-delete\",onClick:function onClick(){return removeFromCart(item.id);},children:\"x\"})]})]},item.id);}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-total-price-wrap\",children:[\"Total\",/*#__PURE__*/_jsxs(\"div\",{className:\"cart-total-price\",children:[\"$\",getTotalPrice()]})]}),/*#__PURE__*/_jsxs(Button,{className:\"cart-modal-btn\",type:\"primary\",children:[/*#__PURE__*/_jsx(CartIcon,{size:20}),/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:12},children:\"Start Checkout\"})]})]});}","map":{"version":3,"sources":["/Users/linjiutao/Documents/大學森活/二下/前端工程/wk5/src/components/CartModal.js"],"names":["Button","Select","useContext","StoreContext","CartIcon","CART_ADD_ITEM","CART_REMOVE_ITEM","Option","CartModal","isModalVisible","toggleModal","cartItems","state","dispatch","handleCancel","addToCart","product","qty","type","payload","id","name","image","price","countInStock","removeFromCart","productId","getTotalPrice","length","reduce","sum","item","map","val","Array","keys","x","marginLeft"],"mappings":"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","sourcesContent":["import { Button, Select } from \"antd\";\nimport { useContext } from \"react\";\nimport { StoreContext } from \"../store\"\nimport { CartIcon } from \"./Icons\";\nimport { CART_ADD_ITEM, CART_REMOVE_ITEM } from \"../utils/constants\";\n\nconst { Option } = Select;\n\nexport default function CartModal({ isModalVisible, toggleModal }) {\n   const { state: { cartItems }, dispatch } = useContext(StoreContext);\n   const handleCancel = () => toggleModal(!isModalVisible);\n   const addToCart = (product, qty) => {\n      dispatch({\n         type: CART_ADD_ITEM,\n         payload: {\n            id: product.id,\n            name: product.name,\n            image: product.image,\n            price: product.price,\n            countInStock: product.countInStock,\n            qty,\n         },\n      });\n   };\n\n   const removeFromCart = (productId) => {\n      dispatch({ type: CART_REMOVE_ITEM, payload: productId });\n   };\n\n   const getTotalPrice = () => {\n      return (cartItems.length > 0) ?\n         cartItems.reduce((sum, item) => sum + item.price * item.qty, 0)\n         : 0;\n   }\n\n   return (\n      <>\n         {cartItems.length === 0 ? (\n            <div>Cart is empty</div>\n         ) : (\n            cartItems.map(item => (\n               <li key={item.id} className=\"cart-item\">\n                  <div className=\"cart-image\">\n                     <img src={item.image} alt={item.name} />\n                  </div>\n                  <div className=\"cart-item-content\">\n                     <div className=\"cart-name\">{item.name}</div>\n                     <div className=\"product-qty\">\n                        Qty: {\"   \"}\n                        <Select\n                           defaultValue={item.qty}\n                           className=\"select-style\"\n                           onChange={(val) => addToCart(item, val)}\n                        >\n                           {[...Array(item.countInStock).keys()].map((x) => (\n                              <Option key={x + 1} value={x + 1}>\n                                 {x + 1}\n                              </Option>\n                           ))}\n                        </Select>\n                     </div>\n                  </div>\n                  <div className=\"cart-item-end\">\n                     <div className=\"cart-price\">\n                        ${item.price * item.qty}    \n                     </div>\n                     <div className=\"cart-item-delete\" onClick={()=>removeFromCart(item.id)}>\n                        x\n                     </div>\n                  </div>\n\n               </li>\n            ))\n         )}\n         <div className=\"cart-total-price-wrap\">\n           Total\n            <div className=\"cart-total-price\">${getTotalPrice()}</div>\n         </div>\n         <Button\n            className=\"cart-modal-btn\"\n            type=\"primary\"\n         >\n            <CartIcon size={20} />\n            <span style={{ marginLeft: 12 }}>Start Checkout</span>\n         </Button>\n      </>\n   );\n}"]},"metadata":{},"sourceType":"module"}