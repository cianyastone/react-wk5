{"ast":null,"code":"import _slicedToArray from\"/Users/linjiutao/Documents/\\u5927\\u5B78\\u68EE\\u6D3B/\\u4E8C\\u4E0B/\\u524D\\u7AEF\\u5DE5\\u7A0B/wk5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _toConsumableArray from\"/Users/linjiutao/Documents/\\u5927\\u5B78\\u68EE\\u6D3B/\\u4E8C\\u4E0B/\\u524D\\u7AEF\\u5DE5\\u7A0B/wk5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/linjiutao/Documents/\\u5927\\u5B78\\u68EE\\u6D3B/\\u4E8C\\u4E0B/\\u524D\\u7AEF\\u5DE5\\u7A0B/wk5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{createContext,useReducer}from\"react\";import products from\"../json/products.json\";import{PAGE_TITLE_SET,PAGE_CONTENT_SET,NAVBAR_ITEM_SET,CART_ADD_ITEM,CART_REMOVE_ITEM}from\"../utils/constants\";import{jsx as _jsx}from\"react/jsx-runtime\";export var StoreContext=/*#__PURE__*/createContext();var initialState={page:{title:\"NORDIC NEST Shopping Cart\",products:products},navBar:{activeItem:\"\"},cartItems:[]};var cartItems={};function reducer(state,action){switch(action.type){case PAGE_TITLE_SET:return _objectSpread(_objectSpread({},state),{},{page:_objectSpread(_objectSpread({},state.page),{},{title:action.payload})});case PAGE_CONTENT_SET:return _objectSpread(_objectSpread({},state),{},{page:_objectSpread(_objectSpread({},state.page),{},{products:action.payload})});case NAVBAR_ITEM_SET:return _objectSpread(_objectSpread({},state),{},{navBar:{activeItem:action.payload}});case CART_ADD_ITEM:var item=action.payload;var product=state.cartItems.find(function(x){return x.id===item.id;});if(product){cartItems=state.cartItems.map(function(x){return x.id===product.id?item:x;});return _objectSpread(_objectSpread({},state),{},{cartItems:cartItems});}cartItems=[].concat(_toConsumableArray(state.cartItems),[item]);return _objectSpread(_objectSpread({},state),{},{cartItems:cartItems});case CART_REMOVE_ITEM:cartItems=state.cartItems.filter(function(x){return x.id!==action.payload;});return _objectSpread(_objectSpread({},state),{},{cartItems:cartItems});default:return state;}}export function StoreProvider(props){var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var value={state:state,dispatch:dispatch};return/*#__PURE__*/_jsx(StoreContext.Provider,{value:value,children:props.children});}","map":{"version":3,"sources":["/Users/linjiutao/Documents/大學森活/二下/前端工程/wk5/src/store/index.js"],"names":["createContext","useReducer","products","PAGE_TITLE_SET","PAGE_CONTENT_SET","NAVBAR_ITEM_SET","CART_ADD_ITEM","CART_REMOVE_ITEM","StoreContext","initialState","page","title","navBar","activeItem","cartItems","reducer","state","action","type","payload","item","product","find","x","id","map","filter","StoreProvider","props","dispatch","value","children"],"mappings":"moBAAA,OAASA,aAAT,CAAwBC,UAAxB,KAA0C,OAA1C,CACA,MAAOC,CAAAA,QAAP,KAAqB,uBAArB,CACA,OACGC,cADH,CAEGC,gBAFH,CAGGC,eAHH,CAIGC,aAJH,CAKGC,gBALH,KAMO,oBANP,C,2CAQA,MAAO,IAAMC,CAAAA,YAAY,cAAGR,aAAa,EAAlC,CAEP,GAAMS,CAAAA,YAAY,CAAG,CAClBC,IAAI,CAAE,CACHC,KAAK,CAAE,2BADJ,CAEHT,QAAQ,CAARA,QAFG,CADY,CAKlBU,MAAM,CAAE,CACLC,UAAU,CAAE,EADP,CALU,CAQlBC,SAAS,CAAE,EARO,CAArB,CAWA,GAAIA,CAAAA,SAAS,CAAG,EAAhB,CAEA,QAASC,CAAAA,OAAT,CAAiBC,KAAjB,CAAwBC,MAAxB,CAAgC,CAC7B,OAAQA,MAAM,CAACC,IAAf,EACG,IAAKf,CAAAA,cAAL,CACG,sCACMa,KADN,MAEGN,IAAI,gCACEM,KAAK,CAACN,IADR,MAEDC,KAAK,CAAEM,MAAM,CAACE,OAFb,EAFP,GAOH,IAAKf,CAAAA,gBAAL,CACG,sCACMY,KADN,MAEGN,IAAI,gCACEM,KAAK,CAACN,IADR,MAEDR,QAAQ,CAAEe,MAAM,CAACE,OAFhB,EAFP,GAOH,IAAKd,CAAAA,eAAL,CACG,sCACMW,KADN,MAEGJ,MAAM,CAAE,CACLC,UAAU,CAAEI,MAAM,CAACE,OADd,CAFX,GAMH,IAAKb,CAAAA,aAAL,CACG,GAAMc,CAAAA,IAAI,CAAGH,MAAM,CAACE,OAApB,CACA,GAAME,CAAAA,OAAO,CAAGL,KAAK,CAACF,SAAN,CAAgBQ,IAAhB,CAAqB,SAACC,CAAD,QAAOA,CAAAA,CAAC,CAACC,EAAF,GAASJ,IAAI,CAACI,EAArB,EAArB,CAAhB,CACA,GAAIH,OAAJ,CAAa,CACVP,SAAS,CAAGE,KAAK,CAACF,SAAN,CAAgBW,GAAhB,CAAoB,SAACF,CAAD,QAC7BA,CAAAA,CAAC,CAACC,EAAF,GAASH,OAAO,CAACG,EAAjB,CAAsBJ,IAAtB,CAA6BG,CADA,EAApB,CAAZ,CAGA,sCAAYP,KAAZ,MAAmBF,SAAS,CAATA,SAAnB,GACF,CACDA,SAAS,8BAAOE,KAAK,CAACF,SAAb,GAAwBM,IAAxB,EAAT,CACA,sCAAYJ,KAAZ,MAAmBF,SAAS,CAATA,SAAnB,GACH,IAAKP,CAAAA,gBAAL,CACGO,SAAS,CAAGE,KAAK,CAACF,SAAN,CAAgBY,MAAhB,CAAuB,SAACH,CAAD,QAAOA,CAAAA,CAAC,CAACC,EAAF,GAASP,MAAM,CAACE,OAAvB,EAAvB,CAAZ,CACA,sCAAYH,KAAZ,MAAmBF,SAAS,CAATA,SAAnB,GACH,QACG,MAAOE,CAAAA,KAAP,CAvCN,CAyCF,CAED,MAAO,SAASW,CAAAA,aAAT,CAAuBC,KAAvB,CAA8B,iBACR3B,UAAU,CAACc,OAAD,CAAUN,YAAV,CADF,4CAC3BO,KAD2B,iBACpBa,QADoB,iBAElC,GAAMC,CAAAA,KAAK,CAAG,CAAEd,KAAK,CAALA,KAAF,CAASa,QAAQ,CAARA,QAAT,CAAd,CAEA,mBACG,KAAC,YAAD,CAAc,QAAd,EAAuB,KAAK,CAAEC,KAA9B,UACIF,KAAK,CAACG,QADV,EADH,CAKF","sourcesContent":["import { createContext, useReducer } from \"react\";\nimport products from \"../json/products.json\"\nimport { \n   PAGE_TITLE_SET,\n   PAGE_CONTENT_SET,\n   NAVBAR_ITEM_SET,\n   CART_ADD_ITEM,\n   CART_REMOVE_ITEM, \n} from \"../utils/constants\"\n\nexport const StoreContext = createContext();\n\nconst initialState = {\n   page: {\n      title: \"NORDIC NEST Shopping Cart\",\n      products,\n   },\n   navBar: {\n      activeItem: \"\",\n   },\n   cartItems: [],\n};\n\nlet cartItems = {};\n\nfunction reducer(state, action) {\n   switch (action.type) {\n      case PAGE_TITLE_SET:\n         return {\n            ...state,\n            page: {\n               ...state.page,\n               title: action.payload,\n            },\n         };\n      case PAGE_CONTENT_SET:\n         return {\n            ...state,\n            page: {\n               ...state.page,\n               products: action.payload,\n            },\n         };\n      case NAVBAR_ITEM_SET:\n         return {\n            ...state,\n            navBar: {\n               activeItem: action.payload\n            }\n         };\n      case CART_ADD_ITEM:\n         const item = action.payload;\n         const product = state.cartItems.find((x) => x.id === item.id);\n         if (product) {\n            cartItems = state.cartItems.map((x) =>\n               x.id === product.id ? item : x\n            );\n            return { ...state, cartItems };\n         }\n         cartItems = [...state.cartItems, item];\n         return { ...state, cartItems };\n      case CART_REMOVE_ITEM:\n         cartItems = state.cartItems.filter((x) => x.id !== action.payload);\n         return { ...state, cartItems };\n      default:\n         return state;\n   }\n}\n\nexport function StoreProvider(props) {\n   const [state, dispatch] = useReducer(reducer, initialState);\n   const value = { state, dispatch };\n\n   return (\n      <StoreContext.Provider value={value}>\n         {props.children}\n      </StoreContext.Provider>\n   );\n}"]},"metadata":{},"sourceType":"module"}