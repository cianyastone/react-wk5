{"ast":null,"code":"var _jsxFileName = \"/Users/linjiutao/Documents/\\u5927\\u5B78\\u68EE\\u6D3B/\\u4E8C\\u4E0B/\\u524D\\u7AEF\\u5DE5\\u7A0B/React-Course/wk5/Ea_DataPersistanceWithCookies/src/store/index.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useReducer } from \"react\";\nimport Cookie from \"js-cookie\";\nimport products from \"../json/products.json\";\nimport { PAGE_TITLE_SET, PAGE_CONTENT_SET, NAVBAR_ITEM_SET, CART_ADD_ITEM, CART_REMOVE_ITEM } from \"../utils/constants\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const StoreContext = /*#__PURE__*/createContext();\nlet cartItems = Cookie.getJSON(\"cartItems\");\nif (!cartItems) cartItems = [];\nconst initialState = {\n  page: {\n    title: \"NORDIC NEST Shopping Cart\",\n    products\n  },\n  navBar: {\n    activeItem: \"\"\n  },\n  cartItems\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case PAGE_TITLE_SET:\n      return { ...state,\n        page: { ...state.page,\n          title: action.payload\n        }\n      };\n\n    case PAGE_CONTENT_SET:\n      return { ...state,\n        page: { ...state.page,\n          products: action.payload\n        }\n      };\n\n    case NAVBAR_ITEM_SET:\n      return { ...state,\n        navBar: {\n          activeItem: action.payload\n        }\n      };\n\n    case CART_ADD_ITEM:\n      const item = action.payload;\n      const product = state.cartItems.find(x => x.id === item.id);\n\n      if (product) {\n        cartItems = state.cartItems.map(x => x.id === product.id ? item : x);\n        return { ...state,\n          cartItems\n        };\n      }\n\n      cartItems = [...state.cartItems, item];\n      return { ...state,\n        cartItems\n      };\n\n    case CART_REMOVE_ITEM:\n      cartItems = state.cartItems.filter(x => x.id !== action.payload);\n      return { ...state,\n        cartItems\n      };\n\n    default:\n      return state;\n  }\n}\n\nexport function StoreProvider(props) {\n  _s();\n\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const value = {\n    state,\n    dispatch\n  };\n  return /*#__PURE__*/_jsxDEV(StoreContext.Provider, {\n    value: value,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 7\n  }, this);\n}\n\n_s(StoreProvider, \"6JWkGZ32UPfojeNx+xqn8ZU8A0Q=\");\n\n_c = StoreProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"StoreProvider\");","map":{"version":3,"sources":["/Users/linjiutao/Documents/大學森活/二下/前端工程/React-Course/wk5/Ea_DataPersistanceWithCookies/src/store/index.js"],"names":["createContext","useReducer","Cookie","products","PAGE_TITLE_SET","PAGE_CONTENT_SET","NAVBAR_ITEM_SET","CART_ADD_ITEM","CART_REMOVE_ITEM","StoreContext","cartItems","getJSON","initialState","page","title","navBar","activeItem","reducer","state","action","type","payload","item","product","find","x","id","map","filter","StoreProvider","props","dispatch","value","children"],"mappings":";;;AAAA,SAASA,aAAT,EAAwBC,UAAxB,QAA0C,OAA1C;AACA,OAAOC,MAAP,MAAmB,WAAnB;AAEA,OAAOC,QAAP,MAAqB,uBAArB;AACA,SACGC,cADH,EAEGC,gBAFH,EAGGC,eAHH,EAIGC,aAJH,EAKGC,gBALH,QAMO,oBANP;;AAQA,OAAO,MAAMC,YAAY,gBAAGT,aAAa,EAAlC;AACP,IAAIU,SAAS,GAAGR,MAAM,CAACS,OAAP,CAAe,WAAf,CAAhB;AACA,IAAI,CAACD,SAAL,EAAgBA,SAAS,GAAG,EAAZ;AAEhB,MAAME,YAAY,GAAG;AAClBC,EAAAA,IAAI,EAAE;AACHC,IAAAA,KAAK,EAAE,2BADJ;AAEHX,IAAAA;AAFG,GADY;AAKlBY,EAAAA,MAAM,EAAE;AACLC,IAAAA,UAAU,EAAE;AADP,GALU;AAQlBN,EAAAA;AARkB,CAArB;;AAWA,SAASO,OAAT,CAAiBC,KAAjB,EAAwBC,MAAxB,EAAgC;AAC7B,UAAQA,MAAM,CAACC,IAAf;AACG,SAAKhB,cAAL;AACG,aAAO,EACJ,GAAGc,KADC;AAEJL,QAAAA,IAAI,EAAE,EACH,GAAGK,KAAK,CAACL,IADN;AAEHC,UAAAA,KAAK,EAAEK,MAAM,CAACE;AAFX;AAFF,OAAP;;AAOH,SAAKhB,gBAAL;AACG,aAAO,EACJ,GAAGa,KADC;AAEJL,QAAAA,IAAI,EAAE,EACH,GAAGK,KAAK,CAACL,IADN;AAEHV,UAAAA,QAAQ,EAAEgB,MAAM,CAACE;AAFd;AAFF,OAAP;;AAOH,SAAKf,eAAL;AACG,aAAO,EACJ,GAAGY,KADC;AAEJH,QAAAA,MAAM,EAAE;AACLC,UAAAA,UAAU,EAAEG,MAAM,CAACE;AADd;AAFJ,OAAP;;AAMH,SAAKd,aAAL;AACG,YAAMe,IAAI,GAAGH,MAAM,CAACE,OAApB;AACA,YAAME,OAAO,GAAGL,KAAK,CAACR,SAAN,CAAgBc,IAAhB,CAAsBC,CAAD,IAAOA,CAAC,CAACC,EAAF,KAASJ,IAAI,CAACI,EAA1C,CAAhB;;AACA,UAAIH,OAAJ,EAAa;AACVb,QAAAA,SAAS,GAAGQ,KAAK,CAACR,SAAN,CAAgBiB,GAAhB,CAAqBF,CAAD,IAC7BA,CAAC,CAACC,EAAF,KAASH,OAAO,CAACG,EAAjB,GAAsBJ,IAAtB,GAA6BG,CADpB,CAAZ;AAGA,eAAO,EAAE,GAAGP,KAAL;AAAYR,UAAAA;AAAZ,SAAP;AACF;;AACDA,MAAAA,SAAS,GAAG,CAAC,GAAGQ,KAAK,CAACR,SAAV,EAAqBY,IAArB,CAAZ;AACA,aAAO,EAAE,GAAGJ,KAAL;AAAYR,QAAAA;AAAZ,OAAP;;AACH,SAAKF,gBAAL;AACGE,MAAAA,SAAS,GAAGQ,KAAK,CAACR,SAAN,CAAgBkB,MAAhB,CAAwBH,CAAD,IAAOA,CAAC,CAACC,EAAF,KAASP,MAAM,CAACE,OAA9C,CAAZ;AACA,aAAO,EAAE,GAAGH,KAAL;AAAYR,QAAAA;AAAZ,OAAP;;AACH;AACG,aAAOQ,KAAP;AAvCN;AAyCF;;AAED,OAAO,SAASW,aAAT,CAAuBC,KAAvB,EAA8B;AAAA;;AAClC,QAAM,CAACZ,KAAD,EAAQa,QAAR,IAAoB9B,UAAU,CAACgB,OAAD,EAAUL,YAAV,CAApC;AACA,QAAMoB,KAAK,GAAG;AAAEd,IAAAA,KAAF;AAASa,IAAAA;AAAT,GAAd;AAEA,sBACG,QAAC,YAAD,CAAc,QAAd;AAAuB,IAAA,KAAK,EAAEC,KAA9B;AAAA,cACIF,KAAK,CAACG;AADV;AAAA;AAAA;AAAA;AAAA,UADH;AAKF;;GATeJ,a;;KAAAA,a","sourcesContent":["import { createContext, useReducer } from \"react\";\nimport Cookie from \"js-cookie\"\n\nimport products from \"../json/products.json\"\nimport {\n   PAGE_TITLE_SET,\n   PAGE_CONTENT_SET,\n   NAVBAR_ITEM_SET,\n   CART_ADD_ITEM,\n   CART_REMOVE_ITEM,\n} from \"../utils/constants\"\n\nexport const StoreContext = createContext();\nlet cartItems = Cookie.getJSON(\"cartItems\");\nif (!cartItems) cartItems = [];\n\nconst initialState = {\n   page: {\n      title: \"NORDIC NEST Shopping Cart\",\n      products,\n   },\n   navBar: {\n      activeItem: \"\",\n   },\n   cartItems,\n};\n\nfunction reducer(state, action) {\n   switch (action.type) {\n      case PAGE_TITLE_SET:\n         return {\n            ...state,\n            page: {\n               ...state.page,\n               title: action.payload,\n            },\n         };\n      case PAGE_CONTENT_SET:\n         return {\n            ...state,\n            page: {\n               ...state.page,\n               products: action.payload,\n            },\n         };\n      case NAVBAR_ITEM_SET:\n         return {\n            ...state,\n            navBar: {\n               activeItem: action.payload\n            }\n         };\n      case CART_ADD_ITEM:\n         const item = action.payload;\n         const product = state.cartItems.find((x) => x.id === item.id);\n         if (product) {\n            cartItems = state.cartItems.map((x) =>\n               x.id === product.id ? item : x\n            );\n            return { ...state, cartItems };\n         }\n         cartItems = [...state.cartItems, item];\n         return { ...state, cartItems };\n      case CART_REMOVE_ITEM:\n         cartItems = state.cartItems.filter((x) => x.id !== action.payload);\n         return { ...state, cartItems };\n      default:\n         return state;\n   }\n}\n\nexport function StoreProvider(props) {\n   const [state, dispatch] = useReducer(reducer, initialState);\n   const value = { state, dispatch };\n\n   return (\n      <StoreContext.Provider value={value}>\n         {props.children}\n      </StoreContext.Provider>\n   );\n}"]},"metadata":{},"sourceType":"module"}